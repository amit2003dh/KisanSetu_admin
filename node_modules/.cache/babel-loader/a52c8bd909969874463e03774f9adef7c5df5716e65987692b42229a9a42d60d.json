{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dell\\\\Documents\\\\projects\\\\KisanSetu\\\\admin\\\\src\\\\components\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport API from \"../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProtectedRoute({\n  children\n}) {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [authorized, setAuthorized] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const checkAuth = async () => {\n      const adminToken = localStorage.getItem(\"adminToken\");\n      if (!adminToken) {\n        navigate(\"/admin/login\");\n        return;\n      }\n      try {\n        // Verify token with backend\n        const response = await API.get(\"/auth/admin/profile\");\n        if (response.data) {\n          setAuthorized(true);\n        } else {\n          // Token invalid, redirect to login\n          localStorage.removeItem(\"adminToken\");\n          localStorage.removeItem(\"adminData\");\n          navigate(\"/admin/login\");\n        }\n      } catch (error) {\n        // Token invalid or expired\n        localStorage.removeItem(\"adminToken\");\n        localStorage.removeItem(\"adminData\");\n        navigate(\"/admin/login\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    checkAuth();\n  }, [navigate]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\",\n        flexDirection: \"column\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: \"16px\",\n          color: \"#666\"\n        },\n        children: \"Authenticating...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this);\n  }\n  return authorized ? children : null;\n}\n_s(ProtectedRoute, \"ndpB+HUmN4QGg8DPYL0RWtEWxpo=\", false, function () {\n  return [useNavigate];\n});\n_c = ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["useEffect","useState","useNavigate","API","jsxDEV","_jsxDEV","ProtectedRoute","children","_s","loading","setLoading","authorized","setAuthorized","navigate","checkAuth","adminToken","localStorage","getItem","response","get","data","removeItem","error","style","display","justifyContent","alignItems","height","flexDirection","className","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","color","_c","$RefreshReg$"],"sources":["C:/Users/dell/Documents/projects/KisanSetu/admin/src/components/ProtectedRoute.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport API from \"../api/api\";\n\nexport default function ProtectedRoute({ children }) {\n  const [loading, setLoading] = useState(true);\n  const [authorized, setAuthorized] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      const adminToken = localStorage.getItem(\"adminToken\");\n      \n      if (!adminToken) {\n        navigate(\"/admin/login\");\n        return;\n      }\n\n      try {\n        // Verify token with backend\n        const response = await API.get(\"/auth/admin/profile\");\n        if (response.data) {\n          setAuthorized(true);\n        } else {\n          // Token invalid, redirect to login\n          localStorage.removeItem(\"adminToken\");\n          localStorage.removeItem(\"adminData\");\n          navigate(\"/admin/login\");\n        }\n      } catch (error) {\n        // Token invalid or expired\n        localStorage.removeItem(\"adminToken\");\n        localStorage.removeItem(\"adminData\");\n        navigate(\"/admin/login\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, [navigate]);\n\n  if (loading) {\n    return (\n      <div style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\",\n        flexDirection: \"column\"\n      }}>\n        <div className=\"loading-spinner\"></div>\n        <p style={{ marginTop: \"16px\", color: \"#666\" }}>Authenticating...</p>\n      </div>\n    );\n  }\n\n  return authorized ? children : null;\n}\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,GAAG,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7B,eAAe,SAASC,cAAcA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACnD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMY,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACd,MAAMc,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;MAErD,IAAI,CAACF,UAAU,EAAE;QACfF,QAAQ,CAAC,cAAc,CAAC;QACxB;MACF;MAEA,IAAI;QACF;QACA,MAAMK,QAAQ,GAAG,MAAMf,GAAG,CAACgB,GAAG,CAAC,qBAAqB,CAAC;QACrD,IAAID,QAAQ,CAACE,IAAI,EAAE;UACjBR,aAAa,CAAC,IAAI,CAAC;QACrB,CAAC,MAAM;UACL;UACAI,YAAY,CAACK,UAAU,CAAC,YAAY,CAAC;UACrCL,YAAY,CAACK,UAAU,CAAC,WAAW,CAAC;UACpCR,QAAQ,CAAC,cAAc,CAAC;QAC1B;MACF,CAAC,CAAC,OAAOS,KAAK,EAAE;QACd;QACAN,YAAY,CAACK,UAAU,CAAC,YAAY,CAAC;QACrCL,YAAY,CAACK,UAAU,CAAC,WAAW,CAAC;QACpCR,QAAQ,CAAC,cAAc,CAAC;MAC1B,CAAC,SAAS;QACRH,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDI,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACD,QAAQ,CAAC,CAAC;EAEd,IAAIJ,OAAO,EAAE;IACX,oBACEJ,OAAA;MAAKkB,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,MAAM,EAAE,OAAO;QACfC,aAAa,EAAE;MACjB,CAAE;MAAArB,QAAA,gBACAF,OAAA;QAAKwB,SAAS,EAAC;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACvC5B,OAAA;QAAGkB,KAAK,EAAE;UAAEW,SAAS,EAAE,MAAM;UAAEC,KAAK,EAAE;QAAO,CAAE;QAAA5B,QAAA,EAAC;MAAiB;QAAAuB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClE,CAAC;EAEV;EAEA,OAAOtB,UAAU,GAAGJ,QAAQ,GAAG,IAAI;AACrC;AAACC,EAAA,CAtDuBF,cAAc;EAAA,QAGnBJ,WAAW;AAAA;AAAAkC,EAAA,GAHN9B,cAAc;AAAA,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}